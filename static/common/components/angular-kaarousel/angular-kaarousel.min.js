!function(){"use strict";function e(){var e={restrict:"EA",scope:{displayed:"=?",perSlide:"=?",autoplay:"=?",direction:"=?",pauseOnHover:"=?",centerActive:"=?",timeInterval:"=?",transitionDuration:"=?",updateRate:"=?",stopAfterAction:"=?",hideNav:"=?",hidePager:"=?",navOnHover:"=?",pagerOnHover:"=?",swipable:"=?",sync:"=?",data:"=?",animation:"=?",loop:"=?",options:"=?",afterSlide:"&?",beforeSlide:"&?",minWidth:"=?",expand:"=?",alwaysFill:"=?"},templateUrl:"app/components/kaarousel/templates/angular-kaarousel.html",transclude:!0,controller:n,controllerAs:"kc"};return e}function n(e,n,i,t,a,o,s){function r(){m(),x(),Y.ready=!0}function l(){return Y.slides?new Array(Math.ceil(Y.slides.length/Y.options.perSlide)):void 0}function d(){Y.kaarousel=n[0],Y.kaarousel.classList.add(B),Y.kaarouselSliderContainer=Y.kaarousel.querySelector(B+"-slider-container"),Y.kaarouselWrapper=Y.kaarousel.querySelector(B+"-wrapper"),Y.kaarouselSlider=Y.kaarousel.querySelector(B+"-slider")}function u(){var n={};return _.isEmpty(e.options)?(_.forEach(K,function(i){n[i]=angular.isDefined(e[i])?e[i]:Y.defaultOptions[i]}),n=c(n)):(n=angular.copy(e.options),n.afterSlide=e.afterSlide,n.beforeSlide=e.beforeSlide,n)}function c(e){return _.forEach(e,function(n,t){-1!==G.indexOf(t)&&i.hasOwnProperty(t)&&angular.isUndefined(n)&&(e[t]=!0)}),e}function p(e){_.forEach(J,function(e){Y.kaarouselSlider.classList.remove(e+"-animation")}),Y.kaarouselSlider.classList.add(e+"-animation"),_.forEach(Y.slides,function(n){n.element.css({"transition-duration":"slide"===e?"":Y.options.transitionDuration/1e3+"s"})})}function f(e,n){var i;switch(e){case"timeInterval":F(),T();break;case"animation":p(n);break;case"direction":g();break;case"autoplay":i=n?"play":"stop",Y[i]();break;case"swipable":V(n);break;case"loop":n&&!Y.isPlaying&&Y.options.autoplay&&T();break;case"transitionDuration":R();break;case"sync":v(n);break;case"centerActive":W(Y.currentIndex,!1,!0);break;case"perSlide":W(Y.currentIndex,!1,!0);break;case"minWidth":k();break;case"alwaysFill":Y.move(Y.currentIndex,!1,!0)}"displayed"!==e&&"expand"!==e&&"animation"!==e||angular.isNumber(Y.options.minWidth)||k()}function v(e){var n;Y.options.autoplay&&(n=angular.isNumber(e)?"stop":"play",Y[n]()),angular.isNumber(e)&&(e>Y.slides.length-1&&(Y.options.sync=Y.slides.length-1),0>e&&(Y.options.sync=0),M(),W(Math.floor(Y.options.sync/Y.options.perSlide),!1,!1))}function g(){var e="horizontal"===Y.options.direction?"vertical":"horizontal";Y.kaarousel.classList.remove("direction-"+e),Y.kaarousel.classList.add("direction-"+Y.options.direction),Y.isHorizontal="horizontal"===Y.options.direction,k()}function m(e,n){Y.options=_.merge({},Y.defaultOptions,h(u())),e?(Y.options[e]=n,Y.options=h(Y.options),f(e,Y.options[e])):P(),S()}function h(e){if(e.displayed<1&&(e.displayed=1),e.minWidth){var n=Y.kaarouselSliderContainer.offsetWidth,i=Math.floor(n/e.minWidth);i<e.displayed&&(e.displayed=i),e.displayed<1&&(e.displayed=1)}return(!e.perSlide||e.perSlide>e.displayed)&&(e.perSlide=e.displayed),e.expand&&Y.slides.length<e.displayed&&(e.displayed=Y.slides.length),e.animation===J[1]&&e.perSlide!==e.displayed&&(e.perSlide=e.displayed),e}function y(e,n){var i=100/Y.options.displayed,t=n%Y.options.displayed;e.element.css(Y.isHorizontal?"height":"width",""),e.element.css(Y.isHorizontal?"width":"height",i+"%"),e.element.css(Y.isHorizontal?"top":"left",""),e.element.css(Y.isHorizontal?"left":"top","slide"===Y.options.animation?"":t*i+"%")}function k(e){return angular.isDefined(e)&&"slide"===Y.options.animation?void y(Y.slides[e],e):(o.cancel(Y.dimensionsTimeout),void(Y.dimensionsTimeout=o(function(){_.forEach(Y.slides,function(e,n){y(e,n)}),W(Y.currentIndex,!1,!0)},200)))}function S(){Y.navigation||(Y.navigation={}),Y.navigation.prev||(Y.navigation.prev={}),Y.navigation.next||(Y.navigation.next={}),Y.state||(Y.state={}),Y.pager||(Y.pager={});var e=Y.slides.length>Y.options.displayed;Y.state.animating=!0,Y.state.dragging=!1,Y.navigation.visible=e&&(!Y.options.hideNav||Y.isHovering&&Y.options.navOnHover),Y.navigation.prev.visible=!b("prev"),Y.navigation.next.visible=!b("next"),Y.pager.visible=e&&(!Y.options.hidePager||Y.isHovering&&Y.options.pagerOnHover)}function b(e){if(Y.options.loop)return!1;var n;switch(e){case"prev":n=Y.currentIndex<Y.options.perSlide;break;case"next":n=Y.currentIndex>Y.slides.length-1-Y.options.perSlide}return n}function x(){_.forEach(i,function(n,i){var t;Y.defaultOptions.hasOwnProperty(i)&&e.$watch(i,function(e,n){o.cancel(t),t=o(function(){e!==n&&m(i,e)},150)})}),a.addEventListener("resize",function(){_.debounce(w,500)(),Y.isPlaying&&F()}),Y.kaarouselWrapper.addEventListener("mouseenter",function(){o(function(){Y.isHovering=!0,S(),Y.options.pauseOnHover&&F()})}),Y.kaarouselSlider.addEventListener("mouseleave",function(){Y.state.swipable&&Y.kaarouselSlider.dispatchEvent(new Event("touchend"))}),Y.kaarouselWrapper.addEventListener("mouseleave",function(){o(function(){Y.isHovering=!1,S(),Y.options.autoplay&&!Y.isPlaying&&T()})}),e.$on("$destroy",function(){Y.isPlaying&&t.cancel(Y.interval),angular.element(Y.kaarouselSlider).unbind("mousedown mousemove mouseup touchstart touchmove touchend touchcancel")})}function w(){Y.options.minWidth&&m(),Y.move(Y.currentIndex,!1,!0),Y.options.autoplay&&!Y.stoppedAfterAction&&T()}function A(e,n){var i={element:e,index:n};e[0].classList.add("kaarousel-slide"),Y.slides||(Y.slides=[]),Y.slides[n]?Y.slides.splice(n,0,i):Y.slides[n]=i,Y.ready&&(m(),k(n))}function H(e){Y.slides.splice(e,1),o(function(){W(Y.currentIndex,null,!0)},150)}function P(){Y.currentIndex=0,Y.currentPage=0,k(),g(),R(),p(Y.options.animation),Y.options.autoplay&&!angular.isNumber(Y.options.sync)&&T(),Y.options.swipable&&V(!0),angular.isNumber(Y.options.sync)&&v(Y.options.sync)}function I(e){var n,i,t=Y.currentIndex;return angular.isNumber(e)?t=e:(n=e?1:-1,i=Y.slides.length-1,t+=Y.options.perSlide*n,t>i&&(t=0),0>t&&(t=Math.ceil(Y.slides.length/Y.options.perSlide)*Y.options.perSlide-Y.options.perSlide)),t}function O(e){W(e*Y.options.perSlide,!0)}function $(e){var n=Y.options.displayed/2;return parseInt(n)!==n&&Y.options.centerActive&&N()>=e.down&&N()<e.up?Math.floor(n):0}function E(){var e=Math.floor(Y.options.displayed/2);return{down:Y.options.centerActive?e+1:0,up:Y.options.centerActive?Y.slides.length-e:Y.slides.length-Y.options.displayed}}function L(){var e,n=N();if(!Y.options.alwaysFill){var i=Y.options.displayed/2;return Y.options.centerActive&&n>i&&(n-=parseInt(i)!==i?Math.floor(i):0),Y.slides[n].element[0]}var t=E();return t.up<0&&(t.up=Y.slides.length),n<t.down&&(e=n<t.down?0:n),n>=t.down&&(e=n<t.up?n:Y.slides.length-Y.options.displayed),e-=$(t),Y.slides[e].element[0]}function z(e){if("slide"===Y.options.animation){var n=L()[Y.isHorizontal?"offsetLeft":"offsetTop"],i=Y.isHorizontal?"translateX":"translateY",t=-(n+(e||0))+"px";angular.element(Y.kaarouselSlider).css({transform:i+"("+t+")",height:"",width:""})}else{var a;"horizontal"===Y.options.direction?(a=_.max(_.filter(Y.slides,{visible:!0}),function(e){return e.element[0].offsetHeight}).element[0].offsetHeight,angular.element(Y.kaarouselSlider).css({height:a+"px",transform:"",width:""})):(a=_.max(_.filter(Y.slides,{visible:!0}),function(e){return e.element[0].offsetWidth}).element[0].offsetWidth,angular.element(Y.kaarouselSlider).css({width:a+"px",transform:"",height:""}))}}function N(){return angular.isNumber(Y.options.sync)?Y.options.sync:Y.currentIndex}function W(e,n,i){Y.options&&Y.options.beforeSlide&&Y.options.beforeSlide()(),Y.currentIndex=i?N():I(e),Y.currentPage=Math.floor(N()/Y.options.perSlide),M(),D(),z(),S(),Y.currentIndex>Y.slides.length-Y.options.displayed&&!Y.options.loop&&F(),n&&Y.isPlaying&&(F(!Y.options.stopAfterAction),Y.options.stopAfterAction&&(Y.stoppedAfterAction=!0)),Y.options.afterSlide&&o(function(){Y.options.afterSlide()()},Y.options.transitionDuration)}function D(){_.forEach(Y.slides,function(e,n){var i,t=Y.slides.length-Y.options.displayed,a=$(E());if("slide"!==Y.options.animation)i=n>=Y.currentPage*Y.options.displayed&&n<(Y.currentPage+1)*Y.options.displayed;else{var o=N()>t&&n>=t,s=N()-a;i=n>=s&&n<s+Y.options.displayed||o}e.visible=i,e.element[0].classList[i?"add":"remove"]("visible")})}function M(){var e=_.filter(Y.slides,{active:!0});e.length&&(e[0].active=!1,e[0].element[0].classList.remove("active"));var n=angular.isNumber(Y.options.sync)?Y.options.sync:Y.currentIndex;Y.slides[n].element[0].classList.add("active"),Y.slides[n].active=!0}function T(){Y.isPlaying||(t.cancel(Y.interval),Y.isPlaying=!0,Y.interval=t(function(){W(!0)},Y.options.timeInterval))}function F(e){Y.isPlaying&&(Y.isPlaying=!1,t.cancel(Y.interval),e&&o(T,Y.options.transitionDuration))}function C(){return Y.options.swipable&&Y.slides.length>Y.options.displayed}function R(){Y.state.animating=!0,angular.element(Y.kaarouselSlider).css("transition-duration",Y.options.transitionDuration/1e3+"s")}function q(){Y.state.animating=!1,angular.element(Y.kaarouselSlider).css("transition-duration","")}function U(e,n){Y.kaarouselSliderContainer.classList.add("dragging");var i,t="horizontal"===Y.options.direction?"x":"y";Y.state.dragging=!0,i=e[t]-n[t],z(i)}function X(){Y.kaarouselSliderContainer.classList.remove("dragging"),Y.state.animating=!0,Y.state.dragging=!1,R()}function j(e,n){var i="horizontal"===Y.options.direction?"x":"y";return e&&n&&Math.abs(e[i]-n[i])>Y.options.swipeThreshold}function V(e){if(Y.state.swipable=e,!Y.swipeReady){var n,i;Y.swipeReady=!0,s.bind(angular.element(Y.kaarouselSlider),{start:function(e){C()&&(q(),i=e,n=null)},move:function(e){C()&&(n=e,U(i,n))},end:function(){if(X(),C()&&n){var e=i.x-n.x;j(i,n)?e>0?W(!0,!0,!1):W(!1,!0,!1):W(Y.currentIndex,!0,!0)}},cancel:function(){C()&&(X(),W(Y.currentIndex,!0,!0))}})}}var Y=this,B="kaarousel",G=["autoplay","pauseOnHover","centerActive","stopAfterAction","hideNav","hidePager","navOnHover","pagerOnHover","swipable","loop","expand","alwaysFill"],J=["slide","fade"],K=["displayed","perSlide","autoplay","direction","pauseOnHover","centerActive","timeInterval","transitionDuration","updateRate","stopAfterAction","hideNav","hidePager","navOnHover","pagerOnHover","swipable","sync","animation","loop","options","afterSlide","beforeSlide","minWidth","expand","alwaysFill"];Y.init=r,Y.register=A,Y.removeSlide=H,Y.move=W,Y.play=T,Y.stop=F,Y.movePage=O,Y.getPages=l,Y.defaultOptions={displayed:3,perSlide:1,autoplay:!0,direction:"horizontal",pauseOnHover:!0,centerActive:!1,timeInterval:3e3,transitionDuration:500,stopAfterAction:!1,hideNav:!1,hidePager:!1,navOnHover:!1,pagerOnHover:!1,swipable:!0,sync:null,animation:"slide",loop:!0,afterSlide:null,beforeSlide:null,minWidth:null,expand:!0,swipeThreshold:100,alwaysFill:!0},Y.state={},d()}n.$inject=["$scope","$element","$attrs","$interval","$window","$timeout","$swipe"],angular.module("angular-kaarousel",["ngTouch"]).directive("kaarousel",e)}(),function(){"use strict";function e(){function e(e,n,i,t){t.register(n,e.$index),e.$last&&!t.ready&&t.init(),e.$on("$destroy",function(){t.removeSlide(e.$index)})}var n={restrict:"EA",require:"^kaarousel",link:e};return n}angular.module("angular-kaarousel").directive("kaarouselSlide",e)}(),angular.module("angular-kaarousel").run(["$templateCache",function(e){e.put("app/components/kaarousel/templates/angular-kaarousel.html",'<kaarousel-wrapper><kaarousel-slider-container><kaarousel-slider ng-transclude="" class="kaarousel-slider"></kaarousel-slider></kaarousel-slider-container><kaarousel-nav ng-class="{\'is-hidden\': !kc.navigation.visible}"><kaarousel-prev ng-click="kc.move(null, true)" ng-class="{\'is-hidden\': !kc.navigation.prev.visible}">PREV</kaarousel-prev><kaarousel-next ng-click="kc.move(true, true)" ng-class="{\'is-hidden\': !kc.navigation.next.visible}">NEXT</kaarousel-next></kaarousel-nav><kaarousel-pager ng-class="{\'is-hidden\': !kc.pager.visible}"><ul><li ng-repeat="i in kc.getPages() track by $index" ng-click="kc.movePage($index)" ng-class="{selected: $index === kc.currentPage}">{{$index}}</li></ul></kaarousel-pager></kaarousel-wrapper>')}]);